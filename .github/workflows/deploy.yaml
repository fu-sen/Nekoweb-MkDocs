name: Deploy Website
on: [push]
jobs:
  deploy:
    runs-on:  macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - run: pip install -r requirements.txt
      - run: mkdocs build
      - run: cp site/404.html site/not_found.html
      - run: mkdir site/${{ secrets.NEKOWEB_DIRECTORY }}
      - run: cp -r site site/${{ secrets.NEKOWEB_DIRECTORY }}
      - uses: indiefellas/deploy2nekoweb@main
        with:
          nekoweb-api-key: ${{ secrets.NEKOWEB_API_KEY }}
          nekoweb-cookie: ${{ secrets.NEKOWEB_COOKIE }}
          directory: 'site'
